<%- include("../layout/header", { title: "Users" } ); -%>
<div>
	<div class="heading">
		<h1>Users</h1>
		<a href="/user/new" class="btn btn-primary">Create user</a>
	</div>
	<div class="table-responsive">
		<table class="table table-striped table-bordered table-hover">
			<thead>
				<tr>
					<th scope="col">#</th>
					<th scope="col">Name</th>
					<th scope="col">Email</th>
					<th scope="col">Role</th>
					<th scope="col">Created at</th>
					<th scope="col">Updated at</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				<% users.forEach(user => { %>
				<tr>
					<th scope="row"><%= user.id %></th>
					<td><%= user.name %></td>
					<td>
						<a href="mailto:<%= user.email %>" target="_blank">
							<%= user.email %>
						</a>
					</td>
					<td><%= user.role %></td>
					<td><%= user.createdAt.toLocaleDateString() + " " + user.createdAt.toLocaleTimeString() %></td>
					<td><%= user.updatedAt.toLocaleDateString() + " " + user.updatedAt.toLocaleTimeString() %></td>
					<td>
						<a href="/user/edit/<%= user.id %>" class="btn btn-outline-primary">Edit</a>
						<form action="/user/delete/<%= user.id %>" method="post" class="d-inline" onsubmit="return confirm('Do you really want to delete this user?')">
							<button type="submit" class="btn btn-outline-danger">Delete</button>
						</form>
					</td>
				</tr>
				<% }) %>
			</tbody>
		</table>
	</div>
</div>
<%- include("../layout/footer") %>
